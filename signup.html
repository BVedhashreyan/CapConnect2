<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up - CapConnect</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        body {
            background-color: #E1D8CC;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        .signup-container {
            background-color: #fff;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 400px;
        }
        h1 {
            color: #825C42;
            text-align: center;
            margin-bottom: 1.5rem;
        }
        .tagline {
            color: #825C42;
            text-align: center;
            margin-bottom: 2rem;
            font-style: italic;
        }
        .user-type {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .user-type-option {
            flex: 1;
            padding: 1rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .user-type-option:hover {
            border-color: #825C42;
        }
        
        .user-type-option.selected {
            border-color: #825C42;
            background-color: rgba(130, 92, 66, 0.1);
        }
        .user-type-option:first-child {
            margin-right: 10px;
        }
        .user-type-option svg {
            width: 40px;
            height: 40px;
            fill: currentColor;
            margin-bottom: 0.5rem;
        }
        .user-type-option svg {
            width: 30px;
            height: 30px;
            fill: #825C42;
            margin-bottom: 0.5rem;
        }
        
        .user-type-option h4 {
            color: #825C42;
            margin-bottom: 0.25rem;
        }
        
        .user-type-option p {
            font-size: 0.85rem;
            color: #666;
        }
        .form-group {
            margin-bottom: 1rem;
        }
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #825C42;
        }
        .form-control {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #825C42;
            border-radius: 5px;
            font-size: 1rem;
        }
        .submit-btn {
            width: 100%;
            background-color: #825C42;
            color: #E1D8CC;
            padding: 0.8rem;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .submit-btn:hover {
            background-color: #6B4A35;
        }
        .social-login {
            margin-top: 1.5rem;
            text-align: center;
        }
        .social-login p {
            margin-bottom: 1rem;
            color: #825C42;
        }
        .social-buttons {
            display: flex;
            justify-content: center;
        }
        .social-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #825C42;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 0.5rem;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .social-btn:hover {
            background-color: #6B4A35;
        }
        .social-btn svg {
            width: 20px;
            height: 20px;
            fill: #E1D8CC;
        }
    </style>
</head>
<body>
    <div class="signup-container">
        <h1>CapConnect</h1>
        <p class="tagline">Join the Future of Funding</p>
        <form id="signup-form">
            <div class="user-type">
                <div class="user-type-option selected" data-type="startup">
                    <svg viewBox="0 0 24 24">
                        <path d="M12,5.5A3.5,3.5 0 0,1 15.5,9A3.5,3.5 0 0,1 12,12.5A3.5,3.5 0 0,1 8.5,9A3.5,3.5 0 0,1 12,5.5M5,8C5.56,8 6.08,8.15 6.53,8.42C6.38,9.85 6.8,11.27 7.66,12.38C7.16,13.34 6.16,14 5,14A3,3 0 0,1 2,11A3,3 0 0,1 5,8M19,8A3,3 0 0,1 22,11A3,3 0 0,1 19,14C17.84,14 16.84,13.34 16.34,12.38C17.2,11.27 17.62,9.85 17.47,8.42C17.92,8.15 18.44,8 19,8M5.5,18.25C5.5,16.18 8.41,14.5 12,14.5C15.59,14.5 18.5,16.18 18.5,18.25V20H5.5V18.25M0,20V18.5C0,17.11 1.89,15.94 4.45,15.6C3.86,16.28 3.5,17.22 3.5,18.25V20H0M24,20H20.5V18.25C20.5,17.22 20.14,16.28 19.55,15.6C22.11,15.94 24,17.11 24,18.5V20Z" />
                    </svg>
                    <h4>Startup</h4>
                    <p>Looking for investment</p>
                </div>
                <div class="user-type-option" data-type="investor">
                    <svg viewBox="0 0 24 24">
                        <path d="M21,18V19A2,2 0 0,1 19,21H5A2,2 0 0,1 3,19V5A2,2 0 0,1 5,3H19A2,2 0 0,1 21,5V6H12C10.89,6 10,6.9 10,8V16A2,2 0 0,0 12,18H21M12,16H22V8H12V16M16,13.5A1.5,1.5 0 0,1 14.5,12A1.5,1.5 0 0,1 16,10.5A1.5,1.5 0 0,1 17.5,12A1.5,1.5 0 0,1 16,13.5Z" />
                    </svg>
                    <h4>Investor</h4>
                    <p>Looking for opportunities</p>
                </div>
            </div>
            
            <div class="form-group">
                <label for="signup-name">Full Name</label>
                <input type="text" id="signup-name" class="form-control" placeholder="Enter your full name" required>
            </div>
            
            <div class="form-group">
                <label for="signup-email">Email Address</label>
                <input type="email" id="signup-email" class="form-control" placeholder="Enter your email" required>
            </div>
            
            <div class="form-group">
                <label for="signup-password">Password</label>
                <input type="password" id="signup-password" class="form-control" placeholder="Create a password" required>
            </div>
            
            <button type="submit" class="submit-btn">Create Account</button>
        </form>
        
        <div class="social-login">
            <p>Or sign up with</p>
            <div class="social-buttons">
                <div class="social-btn">
                    <svg viewBox="0 0 24 24">
                        <path d="M12 2.04C6.5 2.04 2 6.53 2 12.06C2 17.06 5.66 21.21 10.44 21.96V14.96H7.9V12.06H10.44V9.85C10.44 7.34 11.93 5.96 14.22 5.96C15.31 5.96 16.45 6.15 16.45 6.15V8.62H15.19C13.95 8.62 13.56 9.39 13.56 10.18V12.06H16.34L15.89 14.96H13.56V21.96A10 10 0 0 0 22 12.06C22 6.53 17.5 2.04 12 2.04Z" />
                    </svg>
                </div>
                <div class="social-btn">
                    <svg viewBox="0 0 24 24">
                        <path d="M21.35,11.1H12.18V13.83H18.69C18.36,17.64 15.19,19.27 12.19,19.27C8.36,19.27 5,16.25 5,12C5,7.9 8.2,4.73 12.2,4.73C15.29,4.73 17.1,6.7 17.1,6.7L19,4.72C19,4.72 16.56,2 12.1,2C6.42,2 2.03,6.8 2.03,12C2.03,17.05 6.16,22 12.25,22C17.6,22 21.5,18.33 21.5,12.91C21.5,11.76 21.35,11.1 21.35,11.1V11.1Z" />
                    </svg>
                </div>
                <div class="social-btn">
                    <svg viewBox="0 0 24 24">
                        <path d="M19 3A2 2 0 0 1 21 5V19A2 2 0 0 1 19 21H5A2 2 0 0 1 3 19V5A2 2 0 0 1 5 3H19M18.5 18.5V13.2A3.26 3.26 0 0 0 15.24 9.94C14.39 9.94 13.4 10.46 12.92 11.24V10.13H10.13V18.5H12.92V13.57C12.92 12.8 13.54 12.17 14.31 12.17A1.4 1.4 0 0 1 15.71 13.57V18.5H18.5M6.88 8.56A1.68 1.68 0 0 0 8.56 6.88C8.56 5.95 7.81 5.19 6.88 5.19A1.69 1.69 0 0 0 5.19 6.88C5.19 7.81 5.95 8.56 6.88 8.56M8.27 18.5V10.13H5.5V18.5H8.27Z" />
                    </svg>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

    <script>
    // Firebase configuration
    const firebaseConfig = {
        apiKey: "AIzaSyDAWw-ULo8667yfh73CT7um7klrmHz28Ak",
        authDomain: "capconnect-377b7.firebaseapp.com",
        projectId: "capconnect-377b7",
        storageBucket: "capconnect-377b7.firebasestorage.app",
        messagingSenderId: "118573492915",
        appId: "1:118573492915:web:3096948dde5d4827e7dec6",
        measurementId: "G-S09TJS03MH"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore(); // Initialize Firestore

    document.addEventListener('DOMContentLoaded', function () {
        const userTypeOptions = document.querySelectorAll('.user-type-option');
        let selectedUserType = 'startup'; // Default selection

        userTypeOptions.forEach(option => {
            option.addEventListener('click', function () {
                userTypeOptions.forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                selectedUserType = this.dataset.type;
            });
        });

        const signupForm = document.getElementById('signup-form');
        signupForm.addEventListener('submit', function (event) {
            event.preventDefault(); // Prevent default form submission

            const name = document.getElementById('signup-name').value;
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;

            firebase.auth().createUserWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    const user = userCredential.user;
                    const roleCollectionName = selectedUserType === 'investor' ? 'investors' : 'fundraisers';

                    const userData = {
                        name: name,
                        email: email,
                        role: selectedUserType,
                        id: user.uid,
                        password:password,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    };

                    // Firestore references
                    const userDocRef = db.collection('users').doc(user.uid);
                    const roleDocRef = db.collection(roleCollectionName).doc(user.uid);

                    // Use batch write for atomic operation
                    const batch = db.batch();
                    batch.set(userDocRef, userData);
                    batch.set(roleDocRef, userData);

                    return batch.commit().then(() => user);
                })
                .then((user) => {
                    console.log('User created successfully');
                    // Redirect based on user role
                    if (selectedUserType === 'startup') {
                        window.location.href = 'startup-dashboard.html';
                    } else if (selectedUserType === 'investor') {
                        window.location.href = 'investor-dashboard.html';
                    } else {
                        window.location.href = 'dashboard.html';
                    }
                })
                .catch((error) => {
                    console.error('Error creating user:', error);
                    alert('Error creating user: ' + error.message);
                });
        });
    });
</script>
    
</body>
</html>